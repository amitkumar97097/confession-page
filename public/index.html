<!DOCTYPE html>
<html>
<head>
  <title>Confession</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">
  <div class="toggle" onclick="toggleMode()">ğŸŒ™ / â˜€ï¸</div>

  <h2>ğŸ’Œ Confession Box</h2>
  <div class="logo">Anonymous â€¢ Safe â€¢ Private</div>

  <textarea id="msg" placeholder="Type your confession or love letter here..."></textarea>

  <!-- ğŸ“¸ Image Upload -->
  <label class="upload">
    ğŸ“· Upload Photo (optional)
    <input type="file" id="img" accept="image/*" hidden>
  </label>

  <button onclick="send()">Send Confession</button>

  <div class="footer">
    Made with â¤ï¸ for Instagram Confessions
  </div>
</div>

<audio id="snd">
  <source src="https://assets.mixkit.co/sfx/preview/mixkit-message-pop-alert-2354.mp3">
</audio>

<script>
function send(){
  const message = document.getElementById("msg").value.trim();
  const image = document.getElementById("img").files[0];

  if(!message && !image){
    alert("Write something or upload a photo ğŸ˜…");
    return;
  }

  const formData = new FormData();
  if(message) formData.append("message", message);
  if(image) formData.append("image", image);

  snd.play();

  fetch("/confess",{
    method:"POST",
    body: formData
  })
  .then(res => res.json())
  .then(d => {
    if(d.success){
      msg.value = "";
      document.getElementById("img").value = "";
      alert("Confession Sent â¤ï¸");
    }else{
      alert(d.error || "Something went wrong âŒ");
    }
  })
  .catch(()=>{
    alert("Server error âŒ");
  });
}

function toggleMode(){
  document.body.classList.toggle("light");
}
</script>

</body>
</html>
